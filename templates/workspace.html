<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workspace</title>
    <link rel="stylesheet" href="../static/Styles/workspace.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>

<body>
    <header>
        <nav id="Navbar">
            <a href="./index.html" class="NavLink Logo" id="HomePage"><img src="../static/Images/Logo.png" alt="Logo"
                    class="Logo"></a>
            <a href="./login.html" class="NavLink" id="SignInUp">Sign in/up</a>
            <a href="#" class="NavLink" id="Profile">Profile</a>
            <a href="./uploadPage.html" class="NavLink">Upload</a>
            <a href="./workspace.html" class="NavLink">Create</a>
            <a href="./adminPage.html" class="NavLink" id="Admin">Admin hub</a>
        </nav>
    </header>

    <div class="MainBody">
        <div class="Heading">The Workspace</div>

        <h1 style="width:100%">Previously uploaded images:</h1>
        <div class="showCase">
            {% for image in images %}
            <figure>
                <img src="data:image/jpeg;base64,{{ image['data'] }}" alt="{{ image['name'] }}" />
                <figcaption>{{ image['name'] }}</figcaption>
            </figure>
            {% endfor %}
        </div>

        <div id="controlContainer">
            <h1 style="width:100%">Controls :</h1>
            <br>
            <div id="musicSelection">
                <label for="musicUpload">Add Background Music:</label>
                <select id="backgroundMusic">
                    <option value="">Select Background Music</option>
                    {% for a in audio %}
                    <option value="{{ a['name'] }}"><span class="audioName">{{ a['name'] }}</span></option>
                    {% endfor %}
                </select>
                <input type="file" id="musicUpload" accept="audio/*">
            </div>
            <div id="durationSetting">
                <label for="imageDuration">Image Duration (seconds):</label>
                <input type="number" id="imageDuration" min="1" value="5">
            </div>
            <div id="transitionEffect">
                <label for="transitionType">Transition Effect:</label>
                <select id="transitionType">
                    <option value="fade">Fade</option>
                    <option value="slide">Slide</option>
                    <option value="zoom">Zoom</option>
                </select>
            </div>
            <div id="outputSettings">
                <label for="resolution">Video Resolution:</label>
                <select id="resolution">
                    <option value="720p">720p</option>
                    <option value="1080p">1080p</option>
                    <option value="1980p">1980p</option>
                    <option value="4k">4k</option>
                </select>
                <label for="quality">Video Quality:</label>
                <select id="quality">
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                </select>
            </div>
            <div id="buttonContainer">
                <button onclick="generateVideo()">Generate Video</button>
            </div>
        </div>

        <div id="videoContainer">
            <h1 style="width:100%">Video Preview:</h1>
            <video id="videoPlayer" controls autoplay muted loop>
                <source src="../static/Images/WhatsApp Video 2024-02-07 at 21.42.16.mp4">
                <source src="../static/Images/WhatsApp Video 2024-02-07 at 21.42.16.WebM">
                Your Browser does not support HTML5
            </video>
            <div id="downloadVideoButtonContainer">
                <button onclick="downloadVideo()">
                    <i class="fas fa-download"></i> Download Video
                </button>
            </div>
            <!-- <div class="control-bar">
                <button id="playButton" class="control-button">Play</button>
                <button id="pauseButton" class="control-button">Pause</button>
                <button id="rewindButton" class="control-button">Rewind</button>
            </div> -->
        </div>
    </div>


    <footer id="footer">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante
            dapibus diam. Sed nisi.</p>
    </footer>
    <!-- <script src="../static/Scripts/dragAndDrop.js"></script> -->
    <script>
        function allowDrop(event) {
            event.preventDefault();
        }

        function drop(event) {
            event.preventDefault();
            var data = event.dataTransfer.getData("text/plain");
            var img = new Image();
            img.src = data;
            event.target.appendChild(img);
            // Remove the dragged item from the original list
            var draggedItem = document.querySelector('img[src="' + data + '"]');
            if (draggedItem) {
                draggedItem.parentNode.removeChild(draggedItem);
            }
        }

        var gridItems = document.querySelectorAll('.grid-item');
        gridItems.forEach(function (item) {
            item.addEventListener('dragstart', function (event) {
                var imgSrc = item.querySelector('img').src;
                event.dataTransfer.setData('text/plain', imgSrc);
            });
        });
    </script>
</body>

</html>